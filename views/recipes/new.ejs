<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../partials/head') %>
    <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
    <script>tinymce.init({ 
        selector: "#description", 
        plugins: 'lists advlist', 
        menubar: false, 
        toolbar: 'bullist',
        statusbar: false
    });</script>
    <script>tinymce.init({ 
        selector: "#ingredients", 
        plugins: 'lists advlist', 
        menubar: false, 
        toolbar: 'bullist',
        statusbar: false
    });</script>
    <script>tinymce.init({
        selector: "#directions", 
        plugins: 'lists advlist', 
        menubar: false, 
        toolbar: 'bullist',
        valid_elements: '-ul, -li',
        statusbar: false,
        setup : function(editor) { 
            editor.on('focus', () => {
                if (tinyMCE.activeEditor.selection.getNode().nodeName.toLowerCase() != 'li'){
                        editor.execCommand('InsertUnorderedList');
                    }
            });
            editor.on('keyup', (e) => {
                if (e.keyCode == 13 || e.keyCode == 8){
                    if (tinyMCE.activeEditor.selection.getNode().nodeName.toLowerCase() != 'li'){
                        editor.execCommand('InsertUnorderedList');
                    }
                }
            });
        }
    });</script>
</head>

<body>
    <%- include('../partials/header') %>
        <header class="container text-centered mt-5">
            <h1>Submit your recipe to us</h1>
            <p>We're always looking for new and exciting recipies. Submit yours today!</p>
        </header>
        <br>
        <form action="/recipes/new" class="container" method="POST" enctype="multipart/form-data">
            <div>
                <label for="r_title" class="form-label">Recipe Title</label>
                <input type="text" name="r_title" id="r_title" class="form-control" placeholder="Apple Strudel" required>
            </div>
            <div class="mt-4">
                <label for="num_serv" class="form-label">Number of Servings</label>
                <input type="number" name="num_serv" id="num_serv" class="form-control" placeholder="12" required>
            </div>
                <label for="prep_time" class="form-label">Prep Time</label>
                <input type="number" name="prep_time" id="prep_time" class="form-control" placeholder="30 mins" required>
            </div>
                <label for="cook_time" class="form-label">Cook Time</label>
                <input type="number" name="cook_time" id="cook_time" class="form-control" placeholder="15 mins" required>
            </div>
            <div class="mt-4">
                <label for="description" class="form-label">Description</label>
                <input type="text" name="description" id="description" class="form-control"
                    placeholder="1 cup whole wheat pastry flour" required>
            </div>
            <div class="mt-4">
                <label for="ingredients" class="form-label">Ingredients</label>
                <input type="text" name="ingredients" id="ingredients" class="form-control"
                    placeholder="1 cup whole wheat pastry flour" required>
            </div>
            <div class="mt-4">
                <label for="directions" class="form-label">Directions</label>
                <input type="text" name="directions" id="directions" class="form-control"
                    placeholder="Mix sugars together" required>
            </div>
            <div class="input-group mt-4">
                <input type="file" name="photo" id="photo" class="form-control" accept=".png,.jpg,.jpeg,image/png,image/jpg,image/jpeg">
            </div>
            <input type="submit" id="submit" value="submit" class="btn btn-dark mt-4">
            
        </form>
        <%- include('../partials/footer') %>
</body>

</html>